<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<nxthemes:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:nxthemes="http://nuxeo.org/nxthemes"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:nxh="http://nuxeo.org/nxweb/html"
    xmlns:nxu="http://nuxeo.org/nxweb/util"
    xmlns:nxl="http://nuxeo.org/nxforms/layout"
    xmlns:nxd="http://nuxeo.org/nxweb/document">

    <ui:define name="header_scripts">
		<script
            src="#{baseURL}org.richfaces.resources/javax.faces.resource/org.richfaces.staticResource/4.5.0.Alpha3/PackedCompressed/org.richfaces/jquery.js"
            type="text/javascript"></script>
    </ui:define>

    <ui:define name="body">

        <div class="container">

            <div class="form-group">
                <h3>
                    <h:outputText
                        value="#{messages['toutatice.views.edit.title']} '#{currentDocument.title}'" />
                </h3>
            </div>

            <ui:include src="/incl/pv_message_banner.xhtml" />

            <h:form enctype="multipart/form-data" id="document_edit"
                class="form form-horizontal" role="form">

				<ul id="tabs" class="nav nav-tabs tab-margin" role="tablist">
					<li role="presentation" class="active"><a
						aria-controls="content" role="tab" data-toggle="tab"
						href="#content">#{messages['webmode.tab.content.title']}</a></li>
					<li role="presentation"><a aria-controls="metadata" role="tab"
						data-toggle="tab" href="#metadata" onclick="window.parent.jQuery.fancybox.update();">#{messages['webmode.tab.metadata.title']}</a></li>
				</ul>

				<div class="tab-content">
					<div role="tabpanel" class="tab-pane active" id="content">
						<nxl:layout name="ottc_webpage_layout" mode="edit"
                                value="#{currentDocument}" template="/layouts/ottc_div_layout_edit.xhtml"/>
					</div>

					<div role="tabpanel" class="tab-pane" id="metadata">
						<nxl:layout name="ottc_web_metadata" mode="edit" value="#{currentDocument}" 
						    	template="/layouts/ottc_base_div_layout_edit.xhtml"/>
					</div>
				</div>
       
                <h:inputHidden name="fromUrl" value="#{pageBean.fromUrl}" />

                <nav class="navbar navbar-default navbar-fixed-bottom">
                    <div class="container-fluid">
                        <div class="col-sm-offset-2">
                            <nxu:set var="actions"
                                value="#{webActions.getActionsList('OSIVIA_EDIT_DOCUMENT_FORM')}"
                                cache="true">
                                <c:forEach var="action" items="#{actions}">
                                    <nxh:commandButton action="#{action.getLink()}"
                                        immediate="#{action.immediate}" onclick="#{action.confirm}"
                                        id="header_edit_doc_#{action.id}"
                                        value="#{messages[action.label]}" class="btn btn-primary navbar-btn">
                                    </nxh:commandButton>
                                </c:forEach>
                            </nxu:set>
                        </div>
                    </div>
                </nav>
                <h:inputHidden name="fromUrl" value="#{pageBean.fromUrl}" />

            </h:form>

            <div class="pv-footer"></div>
        </div>
    </ui:define>

</nxthemes:composition>