<f:subview xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:s="http://jboss.org/schema/seam/taglib"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:nxu="http://nuxeo.org/nxweb/util"
    xmlns:nxdir="http://nuxeo.org/nxdirectory"
    xmlns:nxl="http://nuxeo.org/nxforms/layout" id="#{widget.id}">
    
    <c:set var="isEditMode" value="#{nxl:isBoundToEditMode(layout.mode)}" />

    <div class="form-group">
        <div class="col-sm-12">

            <fieldset>
                <legend>
                    <i class="glyphicons halflings font"></i>
                    <h:outputText value="#{messages['osivia.fragment.code.field.title']}" />
                </legend>
            </fieldset>
        </div>
    </div>

    <c:choose>
        <c:when test="${isEditMode}">

            <nxu:dataList id="code_fgts"
                value="#{currentDocument.codefgt.codeFragment}" var="code_fgt"
                class="fgts">
                
                <s:div rendered="#{code_fgt.refURI eq fragmentBean.uri}">

                    <div class="form-group">
                        <label class="control-label col-sm-2"
                               for="#{widget.id}_request">#{messages['osivia.fragment.code.form.data']}</label>
                        <div class="col-sm-10">
                            <nxl:widgetType id="#{widget.id}_request" name="textarea" mode="edit" class="form-control"
                                            title="#{messages['osivia.fragment.list.form.request.help']}"
                                            value="#{code_fgt.data}"/>
                        </div>
                    </div>

                </s:div>

            </nxu:dataList>

        </c:when>
        <c:otherwise>


        </c:otherwise>
    </c:choose>



</f:subview>